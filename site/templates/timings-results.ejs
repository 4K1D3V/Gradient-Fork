<%- include("partials/header", { path, title: "Animated Texture Creator" }) %>

<section class="hero is-dark is-fullheight-with-navbar">
  <div class="hero-body">
    <div class="container">
      <p class="title">
        Paper Timings Analysis
      </p>
      <p class="subtitle">
        These are not magic values. Many of these settings have real consequences on your server's mechanics.<br>
        See this guide for detailed information on the functionality of each setting.
      </p>
      <a class="button is-black" href="/PaperTimings">Go back</a>
      <br><br>
      <p>
        Powered by <a href="https://github.com/Pemigrade/botflop" style="text-decoration: underline;">botflop</a>
      </p>
    </div>
  </div>
</section>

<script>
  if ("<%= error %>") showError("<%= error %>")

  function showError(error) {
    document.getElementById("error").innerHTML = error;
    document.getElementById("error").style.display = "block";
  }

  function submit() {
    const link = document.getElementById("link").value;
		if (link.startsWith('https://spark.lucko.me')) {
      return showError('<p class="subtitle">⚠️ Spark Profile</p> This is a Spark Profile. <a href="/SparkProfile" style="text-decoration: underline;">Click here</a> instead for this type of report.')
		}
		if (arg.startsWith('https://www.spigotmc.org/go/timings?url=') || arg.startsWith('https://spigotmc.org/go/timings?url=')) {
      return showError('<p class="subtitle">❌ Spigot</p> Spigot timings have limited information. Switch to <a href="https://purpurmc.org" style="text-decoration: underline;">Purpur</a> for better timings analysis. All your plugins will be compatible, and if you don\'t like it, you can easily switch back.')
		}
		if (!arg.startsWith('https://timin') || !arg.includes('?id=')) {
      return showError('<p class="subtitle">⚠️ Not a valid URL</p> This is not a timings link.')
    }
    const code = link.replace('/d=', '/?id=').replace('timin.gs', 'timings.aikar.co').split('#')[0].split('\n')[0].split('/?id=')[1];
    window.location.href = `/timings-results/${code}`;
  }
</script>

<%- include("partials/footer") %>